<toolkit:Popup
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
    x:Class="BookInventoryApp.FriendPopup"
    CanBeDismissedByTappingOutsideOfPopup="True"
    Color="Transparent">

    <Border Padding="0"
            HeightRequest="500"
            WidthRequest="380"
            Stroke="#444"
            BackgroundColor="#1E1E1E"
            StrokeThickness="1">
        <Border.StrokeShape>
            <RoundRectangle CornerRadius="15"/>
        </Border.StrokeShape>

        <Grid x:Name="MainLayout"
              BackgroundColor="Transparent"
              Padding="20"
              RowSpacing="15"
              ColumnSpacing="0"
              WidthRequest="380"
              HeightRequest="500">

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Title -->
            <Label x:Name="Title"
                   Grid.Row="0"
                   Text="Add Friend"
                   FontSize="22"
                   FontAttributes="Bold"
                   TextColor="White"
                   BackgroundColor="Transparent"
                   HorizontalTextAlignment="Center"
                   VerticalOptions="Center"
                   Padding="0,10"/>

            <!-- Input Fields -->
            <StackLayout Grid.Row="1"
                         Spacing="12"
                         HorizontalOptions="Fill">

                <!-- Name -->
                <Frame BackgroundColor="#2A2A2A"
                       CornerRadius="12"
                       Padding="12,6"
                       HasShadow="False"
                       BorderColor="#444">
                    <Entry x:Name="Name"
                           Placeholder="First Name"
                           TextColor="White"
                           PlaceholderColor="#aaa"
                           BackgroundColor="Transparent"/>
                </Frame>

                <!-- Last Name -->
                <Frame BackgroundColor="#2A2A2A"
                       CornerRadius="12"
                       Padding="12,6"
                       HasShadow="False"
                       BorderColor="#444">
                    <Entry x:Name="LastName"
                           Placeholder="Last Name"
                           TextColor="White"
                           PlaceholderColor="#aaa"
                           BackgroundColor="Transparent"/>
                </Frame>

                <!-- Address -->
                <Frame BackgroundColor="#2A2A2A"
                       CornerRadius="12"
                       Padding="12,6"
                       HasShadow="False"
                       BorderColor="#444">
                    <Entry x:Name="Address"
                           Placeholder="Address"
                           TextColor="White"
                           PlaceholderColor="#aaa"
                           BackgroundColor="Transparent"/>
                </Frame>

                <!-- Nickname -->
                <Frame BackgroundColor="#2A2A2A"
                       CornerRadius="12"
                       Padding="12,6"
                       HasShadow="False"
                       BorderColor="#444">
                    <Entry x:Name="Nickname"
                           Placeholder="Nickname"
                           TextColor="White"
                           PlaceholderColor="#aaa"
                           BackgroundColor="Transparent"/>
                </Frame>
            </StackLayout>

            <!-- Buttons -->
            <HorizontalStackLayout Grid.Row="2"
                                   Spacing="20"
                                   HorizontalOptions="End"
                                   Margin="0,30,0,10">
                <Button Text="Save"
                        Clicked="OnSaveClicked"
                        WidthRequest="100"
                        HeightRequest="45"
                        BackgroundColor="#1da6ca"
                        TextColor="White"
                        CornerRadius="8"
                        FontAttributes="Bold"/>
            </HorizontalStackLayout>

            <!-- Success Overlay -->
            <Grid x:Name="SuccessOverlay"
                  BackgroundColor="#99000000"
                  IsVisible="False"
                  Opacity="0"
                  ZIndex="99"
                  HorizontalOptions="Fill"
                  VerticalOptions="Fill"
                  RowSpan="3">
                <Label Text="✅"
                       FontSize="64"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"/>
            </Grid>

            <!-- Error Overlay -->
            <Grid x:Name="ErrorOverlay"
                  BackgroundColor="#99000000"
                  IsVisible="False"
                  Opacity="0"
                  ZIndex="99"
                  HorizontalOptions="Fill"
                  VerticalOptions="Fill"
                  RowSpan="3">
                <StackLayout VerticalOptions="Center"
                             HorizontalOptions="Center"
                             Spacing="10">
                    <Label Text="❌"
                           FontSize="36"
                           TextColor="White"
                           HorizontalOptions="Center"/>
                    <Label x:Name="ErrorMessage"
                           Text="Something went wrong!"
                           FontSize="16"
                           TextColor="White"
                           HorizontalOptions="Center"/>
                </StackLayout>
            </Grid>
        </Grid>
    </Border>
</toolkit:Popup>
